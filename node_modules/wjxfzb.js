!function () {
  if (0 < maxCheatTimes && window.divContent && 1 === isRunning && document.getElementById("divQuestion") && !window.IsPar) {
    var e = !1;
    if (window.isMobile || (f = function () {
      for (var e, n, t = [["requestFullscreen", "exitFullscreen", "fullscreenElement", "fullscreenEnabled", "fullscreenchange", "fullscreenerror"], ["webkitRequestFullscreen", "webkitExitFullscreen", "webkitFullscreenElement", "webkitFullscreenEnabled", "webkitfullscreenchange", "webkitfullscreenerror"], ["webkitRequestFullScreen", "webkitCancelFullScreen", "webkitCurrentFullScreenElement", "webkitCancelFullScreen", "webkitfullscreenchange", "webkitfullscreenerror"], ["mozRequestFullScreen", "mozCancelFullScreen", "mozFullScreenElement", "mozFullScreenEnabled", "mozfullscreenchange", "mozfullscreenerror"], ["msRequestFullscreen", "msExitFullscreen", "msFullscreenElement", "msFullscreenEnabled", "MSFullscreenChange", "MSFullscreenError"]], i = 0, l = t.length, r = {}; i < l; i++) if ((e = t[i]) && e[1] in document) {
        for (i = 0, n = e.length; i < n; i++) r[t[0][i]] = e[i];
        return r
      }
      return !1
    }(), v = {
      request: function (e) {
        var n = f.requestFullscreen;
        e = e || document.documentElement, "msRequestFullscreen" == n && e === document.documentElement && (e = document.body), /5\.1[\.\d]* Safari/.test(navigator.userAgent) ? e[n]() : e[n](Element.ALLOW_KEYBOARD_INPUT)
      }, exit: function () {
        document[f.exitFullscreen]()
      }, toggle: function (e) {
        this.isFullscreen ? this.exit() : this.request(e)
      }, raw: f, isFullscreen: function () {
        return Boolean(document[f.fullscreenElement])
      }, element: function () {
        return document[f.fullscreenElement]
      }, enabled: function () {
        return Boolean(document[f.fullscreenEnabled])
      }, alert: function (e) {
        alertNew(e)
      }
    }, r = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent), h = -1 < navigator.userAgent.indexOf("compatible") && -1 < navigator.userAgent.indexOf("MSIE") || -1 < navigator.userAgent.indexOf("Trident") && -1 < navigator.userAgent.indexOf("rv:11.0"), !f || r || h ? (window.screenfull = !1, e = !0) : (window.screenfull = v, document.documentElement.addEventListener ? document.documentElement.addEventListener("click", d, !1) : document.documentElement.attachEvent && document.documentElement.attachEvent("onclick", d), v.enabled && (document.documentElement.addEventListener ? document.addEventListener(v.raw.fullscreenchange, function (e) {
      v.isFullscreen() || "file" != document.activeElement.type && m()
    }) : document.documentElement.attachEvent && document.documentElement.attachEvent(v.raw.fullscreenchange, d)))), e) c = '<p style="font-size:18px;text-align:center;margin-top:10px">由于您的浏览器不支持防切屏，请使用Chrome浏览器、Edge、或者（360浏览器、qq浏览器、搜狗浏览器的极速模式下）作答</p>', $("#divQuestion,.footer").hide(), alertNew(c), $("#ValError").html(c), $("#ValError").parent().show(), $("#ctlNext").hide(); else {
      if (document.getElementById("divWeiXin")) {
        if (!isWeiXin) return;
        if (window.needLogin) return
      }
      for (var n = null, t = $(".file"), i = 0; i < t.length; i++) t[i].addEventListener("click", function (e) {
        e.stopPropagation(), e.target.focus(), n = Math.round((new Date).getTime() / 1e3)
      });
      var l, r = !1, r = 1 == window.performance.navigation.type, a = readCookie(activityId + "_cheatTimes") || 0;
      if (parseInt(a) != a && (a = 0), void 0 !== document.hidden) l = "visibilitychange"; else if (void 0 !== document.msHidden) l = "msvisibilitychange"; else if (void 0 !== document.webkitHidden) l = "webkitvisibilitychange"; else {
        if (void 0 === document.mozHidden) return;
        l = "mozvisibilitychange"
      }
      r || $(function () {
        var e = localStorage.getItem("preventcheat_" + activityId) || 0;
        e++, localStorage.setItem("preventcheat_" + activityId, e), 1 < e && m()
      }), void 0 !== document.addEventListener && document.addEventListener(l, function () {
        "visible" === document.visibilityState && m()
      }, !1);
      var o = "由于您离开超过" + maxCheatTimes + "次，系统为防止作弊不允许再作答！",
        c = '已离开<span style="color:red;">' + a + '</span>次，超过<span style="color:red;">' + maxCheatTimes + "</span>次，系统为防止作弊不允许再作答",
        u = "请直接提交答卷，刷新页面将导致无法提交。",
        s = (1 == langVer && (o = "As you leave the answer page more than " + maxCheatTimes + " times,you can't continue to answer in order to prevent cheating.", c = "You have left the answer page for <span style='color:red;'>" + a + "</span> " + (1 == a ? "time" : "times") + ".If you leave more than <span style='color:red;'>" + maxCheatTimes + "</span> times,you can't continue to answer in order to prevent cheating.", u = "Please submit now."), a > maxCheatTimes ? (hasSurveyTime = !0, hasMaxtime = !0, window.amt = 3, window.reachMaxCheatCount = !0, $(document).ready(function () {
          autoSubmit(o), $("#divSubmit").hide()
        })) : 0 < a && alertNew(c), null)
    }

    function m () {
      s && clearTimeout(s), s = setTimeout(function () {
        if (null != document.activeElement.type) {
          var e = document.activeElement.type;
          if (n && isMobile && ("file" == e || "text" == e)) if (Math.round((new Date).getTime() / 1e3) - n <= 30) return void (n = null)
        }
        n = null, a++, parseInt(a) != a && (a = 1), c = '已离开<span style="color:red;">' + a + '</span>次，超过<span style="color:red;">' + maxCheatTimes + "</span>次，系统为防止作弊不允许再作答", 1 == langVer && (c = "You have left the answer page for <span style='color:red;'>" + a + "</span> " + (1 == a ? "time" : "times") + ".If you leave more than <span style='color:red;'>" + maxCheatTimes + "</span> times,you can't continue to answer in order to prevent cheating.");
        e = new Date;
        e.setTime(e.getTime() + 108e5), setCookie(activityId + "_cheatTimes", a, e.toUTCString(), "/", "", null), a > maxCheatTimes ? (hasSurveyTime = !0, hasMaxtime = !0, window.amt = 3, window.reachMaxCheatCount = !0, autoSubmit(o + u, !0)) : alertNew(c)
      }, 200)
    }

    function d () {
      window.isWechat || !window.screenfull.isFullscreen() && window.screenfull.enabled() && window.screenfull.request()
    }
  }
  var f, v, r, h
}();
